<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>TS Labs — Ultimate AI Platform V1.0</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>
/* --- 1. SUPERIOR VARIABLE SYSTEM (THEME ENGINE) --- */
:root {
  /* Default: Obsidian Onyx (Dark Luxury) */
  --bg-deep: #000000;
  --bg-panel: #0a0a0a;
  --surface: #121212;
  --border: rgba(255, 255, 255, 0.08);
  --text-main: #ffffff;
  --text-muted: #a1a1aa;
  --primary: #3b82f6; 
  --primary-glow: rgba(59, 130, 246, 0.4);
  --accent: #60a5fa;
  --radius-xl: 28px;
  --radius-md: 16px;
  --font-head: 'Outfit', sans-serif;
  --font-body: 'Inter', sans-serif;
  --shadow-card: 0 10px 40px -10px rgba(0,0,0,0.5);
  --glass: blur(20px) saturate(180%);
}

/* Theme: Royal Gold */
[data-theme="gold"] {
  --bg-deep: #050500;
  --bg-panel: #0f0f0a;
  --surface: #14140f;
  --border: rgba(255, 215, 0, 0.15);
  --text-main: #fffae0;
  --text-muted: #d4d4b8;
  --primary: #d4af37; 
  --primary-glow: rgba(212, 175, 55, 0.4);
  --accent: #fcd34d;
}

/* Theme: Quantum White */
[data-theme="white"] {
  --bg-deep: #f8f9fa;
  --bg-panel: #ffffff;
  --surface: #ffffff;
  --border: rgba(0, 0, 0, 0.08);
  --text-main: #18181b;
  --text-muted: #52525b;
  --primary: #2563eb; 
  --primary-glow: rgba(37, 99, 235, 0.2);
  --accent: #3b82f6;
  --shadow-card: 0 10px 30px -10px rgba(0,0,0,0.08);
}

* { margin:0; padding:0; box-sizing:border-box; outline:none; -webkit-tap-highlight-color: transparent; }

body { 
  font-family: var(--font-body); 
  background-color: var(--bg-deep); 
  color: var(--text-main); 
  overflow-x: hidden; 
  transition: background-color 0.6s cubic-bezier(0.2, 0.8, 0.2, 1), color 0.6s ease;
  background-image: radial-gradient(circle at 15% 50%, var(--primary-glow), transparent 25%),
                    radial-gradient(circle at 85% 30%, rgba(255,255,255,0.03), transparent 25%);
  background-attachment: fixed;
}

/* Smooth Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(128,128,128,0.3); border-radius: 10px; }
::-webkit-scrollbar-thumb:hover { background: var(--primary); }

/* Animations */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(40px) scale(0.98); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

/* --- NAV BAR --- */
nav {
  position: fixed; top:0; width:100%; padding:18px 5%;
  background: rgba(var(--bg-deep), 0.7);
  backdrop-filter: var(--glass); -webkit-backdrop-filter: var(--glass);
  border-bottom: 1px solid var(--border);
  display:flex; justify-content:space-between; align-items:center;
  z-index:999; transition: all 0.4s ease;
  flex-wrap: wrap;
}

nav .logo-area { display:flex; align-items:center; gap:12px; cursor: pointer; }
nav img { height:36px; transition: 0.3s; }
[data-theme="white"] nav img { filter: invert(1); }

nav ul { display:flex; list-style:none; gap:5px; flex-wrap: wrap; justify-content: flex-end; }
nav a { 
  color: var(--text-muted); text-decoration:none; font-weight:500; font-size:14px; 
  padding: 10px 20px; border-radius: 50px; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  font-family: var(--font-head); letter-spacing: 0.3px; cursor: pointer; white-space: nowrap;
}
nav a:hover, nav a.active-link { 
  color: #fff; background: var(--primary); 
  box-shadow: 0 4px 15px var(--primary-glow);
}
[data-theme="white"] nav a:hover { color: #fff; }

@media (max-width: 768px) {
  nav { padding: 12px 15px; flex-direction: column; gap: 10px; }
  nav ul { width: 100%; justify-content: center; gap: 4px; }
  nav a { font-size: 11px; padding: 8px 12px; }
}

/* --- LAYOUT --- */
.main-container { padding-top: 120px; padding-bottom: 60px; min-height: 100vh; width: 100%; max-width: 1300px; margin: 0 auto; }
.section { display:none; animation: fadeInUp 0.7s cubic-bezier(0.16, 1, 0.3, 1); padding: 0 20px; }
.section.active { display:block; }

/* --- HERO SECTION --- */
header { text-align:center; padding: 60px 20px; position:relative; }
.badge { 
  padding: 8px 20px; border:1px solid var(--primary); background: rgba(59,130,246,0.1); 
  border-radius:30px; color:var(--primary); font-size:12px; font-weight: 700; letter-spacing:1px; 
  text-transform:uppercase; display: inline-block; margin-bottom: 20px;
}
header h1 { 
  font-family: var(--font-head); font-size: clamp(40px, 8vw, 80px); 
  font-weight:800; color:var(--text-main); margin-bottom:20px; letter-spacing: -2px; line-height: 1.05;
}
header h1 span {
  background: linear-gradient(135deg, var(--text-main) 30%, var(--text-muted) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}
header p { 
  font-size: clamp(16px, 4vw, 20px); color: var(--text-muted); margin-bottom:40px; 
  max-width: 700px; margin-left:auto; margin-right:auto; line-height:1.6; 
}

.cta { 
  padding:18px 45px; 
  background: var(--primary);
  border-radius:50px; color:white; text-decoration:none; font-weight:600; font-family: var(--font-head);
  box-shadow: 0 10px 30px var(--primary-glow); 
  transition: transform 0.3s, box-shadow 0.3s; display:inline-block; font-size: 16px; cursor: pointer;
  border: 1px solid rgba(255,255,255,0.2);
}
.cta:hover { transform: translateY(-3px); box-shadow: 0 20px 40px var(--primary-glow); }

/* --- TOOLS GRID --- */
h2 { font-family: var(--font-head); font-size: clamp(30px, 6vw, 42px); margin-bottom:40px; color: var(--text-main); text-align: center; }
h2 span { color: var(--primary); }

.grid { 
  display:grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap:25px; 
}

.tool-card { 
  background: var(--surface);
  padding:35px 25px; 
  border-radius: var(--radius-xl); 
  border: 1px solid var(--border);
  transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
  cursor:pointer; text-align:center; position: relative; overflow: hidden;
  box-shadow: var(--shadow-card);
}
.tool-card:hover { 
  transform:translateY(-10px) scale(1.02); 
  border-color: var(--primary); 
  background: var(--bg-panel);
}
.icon-box {
  width: 65px; height: 65px; margin: 0 auto 25px;
  background: rgba(255,255,255,0.03);
  border-radius: 20px;
  display: flex; justify-content: center; align-items: center;
  border: 1px solid var(--border);
  transition: 0.3s;
}
.tool-card:hover .icon-box { background: var(--primary); border-color: transparent; }
.tool-card img { width:32px; height:32px; transition: 0.3s; filter: invert(1); }
[data-theme="white"] .tool-card img { filter: invert(0); }
.tool-card:hover img { filter: invert(1) brightness(2); }

.tool-card b { display:block; font-size: 20px; margin-bottom: 10px; color: var(--text-main); font-family: var(--font-head); }
.tool-card span { font-size: 14px; color: var(--text-muted); font-weight: 400; line-height: 1.5; }

/* --- AI FULLSCREEN INTERFACE --- */
.ai-fullscreen {
  position: fixed; top:0; left:0; width:100%; height:100%;
  z-index: 2000;
  display:none; flex-direction: column;
  background-color: var(--bg-deep); 
  transition: background-color 0.5s ease;
}
.ai-fullscreen.active { display: flex; animation: fadeInScale 0.4s cubic-bezier(0.16, 1, 0.3, 1); }

@keyframes fadeInScale { from { opacity: 0; transform: scale(0.96); } to { opacity: 1; transform: scale(1); } }

.ai-top-bar {
  flex: 0 0 70px; display: flex; align-items: center; justify-content: space-between;
  padding: 0 25px; border-bottom: 1px solid var(--border);
  background: rgba(var(--bg-deep), 0.8); backdrop-filter: var(--glass);
}
.ai-top-bar h3 { font-family: var(--font-head); font-size: 18px; color: var(--text-main); font-weight: 700; letter-spacing: 0.5px; }
.ai-back-btn {
  background: transparent; border:1px solid var(--border); color: var(--text-muted); 
  padding: 8px 18px; border-radius: 50px; cursor: pointer; font-weight: 600; transition: .3s; font-size: 13px;
}
.ai-back-btn:hover { background: var(--text-main); color: var(--bg-deep); border-color: var(--text-main); }

.ai-main-area {
  flex: 1; overflow-y: auto; position: relative; padding: 0; 
  display: flex; flex-direction: column; align-items: center; width: 100%;
  scroll-behavior: smooth;
}

.output-box {
  width: 100%; max-width: 900px; 
  padding: 30px 20px; 
  margin-bottom: 20px;
  color: var(--text-main);
  display: flex; flex-direction: column;
}

/* Chat Bubbles */
.msg-user { display: flex; justify-content: flex-end; width: 100%; margin-bottom: 25px; padding-left: 50px; }
.msg-user .chat-bubble { 
    background: var(--primary); color: #fff; 
    border-radius: 20px 20px 4px 20px; 
    box-shadow: 0 5px 20px var(--primary-glow); 
    max-width: 85%;
}

.msg-ai { display: flex; justify-content: flex-start; width: 100%; margin-bottom: 25px; padding-right: 20px; }
.msg-ai .chat-bubble { 
    background: var(--surface); 
    color: var(--text-main); 
    border-radius: 20px 20px 20px 4px; 
    border: 1px solid var(--border);
    max-width: 100%;
}

.chat-bubble {
    padding: 16px 24px; font-size: 16px; line-height: 1.6; 
    position: relative; word-wrap: break-word; 
    font-family: var(--font-body);
}

/* Markdown Styling */
.chat-bubble strong { color: var(--accent); font-weight: 700; }
.chat-bubble h1, .chat-bubble h2, .chat-bubble h3 { margin: 20px 0 10px 0; color: var(--text-main); font-family: var(--font-head); font-weight: 700; }
.chat-bubble code { background: rgba(128,128,128,0.2); padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', monospace; color: var(--accent); font-size: 0.9em; }
.chat-bubble pre { background: #101010; padding: 20px; border-radius: 12px; border: 1px solid var(--border); overflow-x: auto; margin: 15px 0; }
.chat-bubble pre code { background: transparent; padding: 0; color: #f8f8f2; }
.chat-bubble blockquote { border-left: 4px solid var(--primary); margin: 15px 0; padding-left: 20px; color: var(--text-muted); font-style: italic; }
.chat-bubble ul, .chat-bubble ol { margin-left: 20px; margin-bottom: 15px; }

.ai-input-wrapper {
  flex: 0 0 auto; width: 100%; max-width: 900px; margin: 0 auto;
  padding: 0 15px 20px 15px; position: relative; z-index: 50;
}

/* File Preview */
.file-preview-area {
    display: none; align-items: center; gap: 10px;
    background: var(--surface); border: 1px solid var(--border); border-bottom: none;
    padding: 12px 20px; border-radius: 20px 20px 0 0; margin: 0 10px;
    backdrop-filter: blur(10px); animation: fadeInUp 0.2s ease; flex-wrap: wrap;
}
.file-preview-area.active { display: flex; }
.preview-thumb { width: 40px; height: 40px; border-radius: 8px; object-fit: cover; border: 1px solid var(--border); }
.preview-info { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
.preview-name { font-size: 13px; color: var(--text-main); font-weight: 600; }
.preview-size { font-size: 11px; color: var(--primary); }

.tag-chip {
    display: inline-flex; align-items: center; gap: 8px;
    background: var(--primary-glow); border: 1px solid var(--primary);
    padding: 6px 12px; border-radius: 20px; color: #fff; font-size: 12px;
    animation: fadeInScale 0.2s ease;
}
.tag-chip img { width: 14px; height: 14px; filter: invert(1); }
.tag-close { cursor: pointer; opacity: 0.6; padding: 2px; }
.tag-close:hover { opacity: 1; color: #ff5555; }

/* Input Bar */
.input-group {
  display: flex; align-items: center; gap: 12px; background: var(--surface);
  padding: 10px 15px; border-radius: 24px; border: 1px solid var(--border);
  backdrop-filter: blur(25px); transition: 0.3s; width: 100%; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}
.input-group.has-preview { border-radius: 0 0 24px 24px; border-top: 1px solid rgba(255,255,255,0.05); }
.input-group:focus-within { border-color: var(--primary); box-shadow: 0 0 20px var(--primary-glow); }

.panel-btn, .send-btn {
  width: 48px; height: 48px; border-radius: 18px; border: none;
  background: rgba(128,128,128,0.1); color: var(--text-main); cursor: pointer; 
  flex-shrink: 0; display: flex; justify-content: center; align-items: center; transition: 0.2s;
}
.panel-btn:hover { background: rgba(128,128,128,0.2); }
.panel-btn img { filter: invert(1); width: 22px; height: 22px; opacity: 0.7; }
[data-theme="white"] .panel-btn img { filter: invert(0); }

textarea.custom-input {
  flex: 1; background: transparent; border: none; color: var(--text-main); resize: none; 
  padding: 14px 5px; font-size: 16px; max-height: 120px; font-family: var(--font-body);
}

.send-btn { background: var(--primary); color: #fff; }
.send-btn:hover { transform: scale(1.05); }
.send-btn svg { width:20px; fill:#fff; }

/* Menus */
.panel-menu {
  position: absolute; bottom: 90px; left: 15px; background: var(--bg-panel);
  border: 1px solid var(--border); border-radius: 20px; padding: 15px; 
  display: none; width: 260px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); z-index: 2001;
  max-height: 320px; overflow-y: auto;
}
.panel-menu.show { display: block; animation: fadeInUp 0.3s ease; }
.panel-group-title { font-size: 11px; color: var(--primary); text-transform: uppercase; margin: 12px 10px 6px; font-weight: 800; letter-spacing: 1px; }
.panel-item { 
  display: flex; align-items: center; padding: 12px 15px; color: var(--text-main); 
  cursor: pointer; font-size: 14px; border-radius:12px; gap: 12px; transition: .2s;
}
.panel-item:hover { background: rgba(128,128,128,0.1); padding-left: 20px; }
.panel-icon { width: 18px; height: 18px; opacity: 0.8; filter: invert(1); }
[data-theme="white"] .panel-icon { filter: invert(0); }

/* Settings Modal */
#settingsModal {
  position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); backdrop-filter: blur(10px);
  display:flex; justify-content:center; align-items:center; opacity:0; pointer-events:none; transition:.3s; z-index:3000; padding: 20px;
}
#settingsModal .modal-content {
  background: var(--bg-panel); padding:40px; border-radius:30px; width:100%; max-width:420px;
  border: 1px solid var(--border); text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.5);
  transform: scale(0.9); transition: 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}
#settingsModal.active { opacity: 1; pointer-events: auto; }
#settingsModal.active .modal-content { transform: scale(1); }

#settingsModal select { 
  width: 100%; padding: 16px; background: var(--surface); color: var(--text-main); border: 1px solid var(--border); 
  border-radius: 16px; margin-bottom: 25px; outline: none; font-family: var(--font-body); font-size: 15px; appearance: none;
}
#settingsModal label { color: var(--text-muted); display: block; text-align: left; margin-bottom: 8px; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }

/* Typing Indicator */
.typing-indicator { display: inline-flex; gap: 6px; padding: 12px 20px; background: var(--surface); border-radius: 20px; align-items: center; border: 1px solid var(--border); }
.dot { width: 8px; height: 8px; background: var(--text-muted); border-radius: 50%; animation: bounce 1.4s infinite ease-in-out; }
.dot:nth-child(1) { animation-delay: -0.32s; } .dot:nth-child(2) { animation-delay: -0.16s; }
@keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }

/* Generated Image */
.generated-img { width: 100%; border-radius: 16px; border: 1px solid var(--border); box-shadow: 0 10px 40px rgba(0,0,0,0.3); }

/* Footer */
footer.main-footer { text-align: center; padding: 40px 20px; color: var(--text-muted); font-size: 13px; border-top: 1px solid var(--border); margin-top: 80px; background: var(--bg-deep); }
.wm-footer { flex: 0 0 30px; text-align: center; font-size: 10px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 2px; padding-bottom: 10px; opacity: 0.5; }
</style>
</head>
<body data-theme="default">

<input type="file" id="realFileInput" style="display: none;" onchange="handleRealFileUpload(this)">

<nav>
  <div class="logo-area">
    <img src="https://files.catbox.moe/goqadp.png" alt="TS Labs">
    <span style="font-weight:800; letter-spacing:0.5px; font-family:var(--font-head); font-size:20px; color:var(--text-main);">TS LABS <span style="font-weight:300; opacity:0.7;">ULTIMATE</span></span>
  </div>
  <ul>
    <li><a onclick="showSection('home')" class="active-link" data-lang-key="nav_home">Home</a></li>
    <li><a onclick="showSection('ai')" data-lang-key="nav_ai">AI Tools</a></li>
    <li><a onclick="showSection('features')" data-lang-key="nav_features">Fitur</a></li>
    <li><a onclick="showSection('creator')" data-lang-key="nav_creator">Creator</a></li>
    <li><a id="btnSettings" data-lang-key="nav_settings">Setelan</a></li>
  </ul>
</nav>

<div class="main-container">

  <header id="home" class="section active">
    <div style="margin-top:20px;">
      <span class="badge">V 1.0 Ultimate Engine</span>
    </div>
    <h1 id="hero-title">Experience<br><spain></spain>The Future<br><span>Without Limits</span></h1>
    <p id="hero-desc" data-lang-key="hero_desc">Platform kecerdasan buatan kelas atas. Menggabungkan kecepatan, akurasi, dan desain premium untuk produktivitas maksimal.</p>
    <a class="cta" onclick="showSection('ai')" data-lang-key="btn_start">Start Creating</a>
  </header>

  <section id="ai" class="section">
    <h2 data-lang-key="section_tools">Premium <span>AI Suite</span></h2>
    <div class="grid">
      
      <div class="tool-card" onclick="openAI('chat-page')">
        <div class="icon-box"><img src="https://cdn-icons-png.flaticon.com/512/4712/4712083.png"></div>
        <b data-lang-key="tool_chat">Chat Genius</b><span data-lang-key="desc_chat">Asisten Cerdas Serba Bisa.</span>
      </div>

      <div class="tool-card" onclick="openAI('image-page')">
        <div class="icon-box"><img src="https://cdn-icons-png.flaticon.com/512/2910/2910762.png"></div>
        <b data-lang-key="tool_image">Visual Art</b><span data-lang-key="desc_image">Generator Gambar Ultra HD.</span>
      </div>

      <div class="tool-card" onclick="openAI('logo-page')">
        <div class="icon-box"><img src="https://cdn-icons-png.flaticon.com/512/1040/1040241.png"></div>
        <b data-lang-key="tool_logo">Logo Studio</b><span data-lang-key="desc_logo">Desain Brand Profesional.</span>
      </div>

      <div class="tool-card" onclick="openAI('social-page')">
        <div class="icon-box"><img src="https://cdn-icons-png.flaticon.com/512/1968/1968666.png"></div>
        <b data-lang-key="tool_social">Sosmed Manager</b><span data-lang-key="desc_social">Caption Viral & Hashtag.</span>
      </div>

      <div class="tool-card" onclick="openAI('prompt-page')">
        <div class="icon-box"><img src="https://cdn-icons-png.flaticon.com/512/3209/3209964.png"></div>
        <b data-lang-key="tool_prompt">Super Prompt</b><span data-lang-key="desc_prompt">Perbagus Prompt Gambar.</span>
      </div>

      <div class="tool-card" onclick="openAI('dream-page')">
        <div class="icon-box"><img src="https://cdn-icons-png.flaticon.com/512/2910/2910806.png"></div>
        <b data-lang-key="tool_dream">Dream Interpreter</b><span data-lang-key="desc_dream">Tafsir Arti Mimpi.</span>
      </div>

      <div class="tool-card" onclick="openAI('writer-page')">
        <div class="icon-box"><img src="https://cdn-icons-png.flaticon.com/512/2593/2593510.png"></div>
        <b data-lang-key="tool_writer">Pro Writer</b><span data-lang-key="desc_writer">Penulis Artikel & Esai.</span>
      </div>
      
      <div class="tool-card" onclick="openAI('math-page')">
        <div class="icon-box"><img src="https://cdn-icons-png.flaticon.com/512/4711/4711987.png"></div>
        <b data-lang-key="tool_math">Math Solver</b><span data-lang-key="desc_math">Solusi Matematika & Fisika.</span>
      </div>

      <div class="tool-card" onclick="openAI('code-page')">
        <div class="icon-box"><img src="https://cdn-icons-png.flaticon.com/512/1005/1005141.png"></div>
        <b data-lang-key="tool_code">Code Master</b><span data-lang-key="desc_code">Programming & Debugging.</span>
      </div>

      <div class="tool-card" onclick="openAI('email-page')">
        <div class="icon-box"><img src="https://cdn-icons-png.flaticon.com/512/732/732200.png"></div>
        <b data-lang-key="tool_email">Email Pro</b><span data-lang-key="desc_email">Buat Email Formal.</span>
      </div>

      <div class="tool-card" onclick="openAI('story-page')">
        <div class="icon-box"><img src="https://cdn-icons-png.flaticon.com/512/3079/3079165.png"></div>
        <b data-lang-key="tool_story">Story Creator</b><span data-lang-key="desc_story">Buat Cerita Pendek.</span>
      </div>

      <div class="tool-card" onclick="openAI('idea-page')">
        <div class="icon-box"><img src="https://cdn-icons-png.flaticon.com/512/1006/1006553.png"></div>
        <b data-lang-key="tool_idea">Business Idea</b><span data-lang-key="desc_idea">Ide Bisnis Startup.</span>
      </div>

    </div>
  </section>

  <section id="features" class="section">
    <h2 data-lang-key="section_features">Fitur <span>Eksklusif</span></h2>
    <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
        <div style="padding:20px; background:var(--surface); border-radius:15px; border:1px solid var(--border); text-align:center;">
            <img src="https://cdn-icons-png.flaticon.com/512/4456/4456868.png" width="40" style="filter:invert(1); margin-bottom:10px;">
            <h4 style="color:var(--text-main); margin-bottom:5px;">Unlimited</h4>
            <small style="color:var(--text-muted);">Tanpa batas harian</small>
        </div>
        <div style="padding:20px; background:var(--surface); border-radius:15px; border:1px solid var(--border); text-align:center;">
            <img src="https://cdn-icons-png.flaticon.com/512/3756/3756734.png" width="40" style="filter:invert(1); margin-bottom:10px;">
            <h4 style="color:var(--text-main); margin-bottom:5px;">Fast Speed</h4>
            <small style="color:var(--text-muted);">Server prioritas Turbo</small>
        </div>
        <div style="padding:20px; background:var(--surface); border-radius:15px; border:1px solid var(--border); text-align:center;">
            <img src="https://cdn-icons-png.flaticon.com/512/565/565547.png" width="40" style="filter:invert(1); margin-bottom:10px;">
            <h4 style="color:var(--text-main); margin-bottom:5px;">Real AI</h4>
            <small style="color:var(--text-muted);">Tanpa fitur palsu</small>
        </div>
        <div style="padding:20px; background:var(--surface); border-radius:15px; border:1px solid var(--border); text-align:center;">
             <img src="https://cdn-icons-png.flaticon.com/512/2910/2910317.png" width="40" style="filter:invert(1); margin-bottom:10px;">
             <h4 style="color:var(--text-main); margin-bottom:5px;">Secure</h4>
             <small style="color:var(--text-muted);">Enkripsi Data End-to-End</small>
        </div>
    </div>
  </section>

  <section id="creator" class="section">
    <h2 data-lang-key="section_creator">Meet The <span>Creator</span></h2>
    <div style="background:var(--bg-panel); padding:40px; border-radius:30px; border:1px solid var(--border); max-width:700px; margin:0 auto; text-align:center; box-shadow:var(--shadow-card);">
        <img src="https://files.catbox.moe/fydnpg.jpg" alt="Topik Safalas" style="width:120px; height:120px; border-radius:50%; border:4px solid var(--primary); padding:4px; margin-bottom:20px; object-fit:cover;">
        <h3 style="font-size:26px; margin-bottom:5px; color:var(--text-main);">Topik Safalas</h3>
        <p style="color:var(--primary); font-weight:600; margin-bottom:20px;">Lead Developer & AI Architect</p>
        <p style="color:var(--text-muted); margin-bottom:30px;">"Teknologi seharusnya tidak hanya canggih, tapi juga indah dan mudah digunakan. V1.0 Ultimate adalah perwujudan visi tersebut."</p>
        <div style="display:flex; justify-content:center; gap:20px; align-items:center;">
             <a href="https://wa.me/6285642045238" target="_blank" style="transition:0.3s; display:inline-block;">
                <img src="https://cdn-icons-png.flaticon.com/512/3670/3670051.png" style="width:50px; height:50px; filter:drop-shadow(0 5px 10px rgba(0,0,0,0.3));" alt="WhatsApp">
             </a>
             <a href="https://t.me/superpikz" target="_blank" style="transition:0.3s; display:inline-block;">
                <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" style="width:50px; height:50px; filter:drop-shadow(0 5px 10px rgba(0,0,0,0.3));" alt="Telegram">
             </a>
        </div>
    </div>
  </section>

</div>

<footer class="main-footer">
  &copy; 2025 TS Labs — V1.0 Ultimate Edition.
</footer>

<div id="chat-page" class="ai-fullscreen">
  <div class="ai-top-bar"><button class="ai-back-btn" onclick="closeAI()">← Back</button><h3 data-lang-key="tool_chat">Chat Genius</h3><div style="width:50px;"></div></div>
  <div class="ai-main-area"><div class="output-box" id="chatOutput">
      <div style="text-align:center; margin-top:50px; opacity:0.6;">
        <img src="https://cdn-icons-png.flaticon.com/512/4712/4712083.png" width="70" style="filter:invert(1); margin-bottom:20px;">
        <p data-lang-key="ui_ready">System Ready. Ask anything.</p>
      </div>
  </div></div>
  <div class="ai-input-wrapper">
      <div id="preview-chat-page" class="file-preview-area"></div>
      <div id="panel-chat" class="panel-menu">
          <div class="panel-group-title">File & Media</div>
          <div class="panel-item" onclick="triggerFileUpload('chat-page', 'image')"><img src="https://cdn-icons-png.flaticon.com/512/3342/3342137.png" class="panel-icon"> Upload Foto</div>
          <div class="panel-item" onclick="triggerFileUpload('chat-page', 'file')"><img src="https://cdn-icons-png.flaticon.com/512/2991/2991106.png" class="panel-icon"> Upload Dokumen</div>
          <div class="panel-group-title">Mode</div>
          <div class="panel-item" onclick="addTag('chat-page', 'Mode Developer Activated. ', 'Developer Mode')"><img src="https://cdn-icons-png.flaticon.com/512/2010/2010990.png" class="panel-icon"> Developer Mode</div>
          <div class="panel-item" onclick="addTag('chat-page', 'Explain simply like I am 5 years old: ', 'Simple Explain')"><img src="https://cdn-icons-png.flaticon.com/512/4205/4205604.png" class="panel-icon"> Simple Explain</div>
      </div>
      <div class="input-group">
          <button class="panel-btn" onclick="togglePanel('panel-chat')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828919.png"></button>
          <textarea class="custom-input" placeholder="Type message..."></textarea>
          <button class="send-btn"><svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg></button>
      </div>
  </div>
  <div class="wm-footer">POWERED BY TOPIK SAFALAS</div>
</div>

<div id="image-page" class="ai-fullscreen">
  <div class="ai-top-bar"><button class="ai-back-btn" onclick="closeAI()">← Back</button><h3 data-lang-key="tool_image">Visual Art</h3><div style="width:50px;"></div></div>
  <div class="ai-main-area"><div class="output-box">
      <p style="text-align:center; color:var(--text-muted); margin-top:50px;" data-lang-key="ui_image_wait">High Quality Render Preview Area</p>
  </div></div>
  <div class="ai-input-wrapper">
      <div id="panel-image" class="panel-menu">
         <div class="panel-group-title">Art Style</div>
         <div class="panel-item" onclick="addTag('image-page', ', highly detailed 8k masterpiece, photorealistic', 'Realistic')"><img src="https://cdn-icons-png.flaticon.com/512/685/685655.png" class="panel-icon"> Realistic</div>
         <div class="panel-item" onclick="addTag('image-page', ', anime style, studio ghibli, vibrant', 'Anime')"><img src="https://cdn-icons-png.flaticon.com/512/5266/5266650.png" class="panel-icon"> Anime</div>
         <div class="panel-item" onclick="addTag('image-page', '--ar 16:9', 'Wide (16:9)')"><img src="https://cdn-icons-png.flaticon.com/512/5486/5486306.png" class="panel-icon"> Wide</div>
      </div>
      <div id="preview-image-page" class="file-preview-area"></div>
      <div class="input-group">
          <button class="panel-btn" onclick="togglePanel('panel-image')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828919.png"></button>
          <textarea class="custom-input" placeholder="Describe your imagination..."></textarea>
          <button class="send-btn">Go</button>
      </div>
  </div>
   <div class="wm-footer">POWERED BY TOPIK SAFALAS</div>
</div>

<div id="code-page" class="ai-fullscreen">
  <div class="ai-top-bar"><button class="ai-back-btn" onclick="closeAI()">← Back</button><h3 data-lang-key="tool_code">Code Master</h3><div style="width:50px;"></div></div>
  <div class="ai-main-area"><div class="output-box"></div></div>
  <div class="ai-input-wrapper">
      <div id="preview-code-page" class="file-preview-area"></div>
      <div id="panel-code" class="panel-menu">
          <div class="panel-group-title">Bahasa</div>
          <div class="panel-item" onclick="addTag('code-page', 'Write in HTML/CSS/JS: ', 'HTML/Web')"><img src="https://cdn-icons-png.flaticon.com/512/1051/1051277.png" class="panel-icon"> HTML/Web</div>
          <div class="panel-item" onclick="addTag('code-page', 'Write in Python: ', 'Python')"><img src="https://cdn-icons-png.flaticon.com/512/5968/5968350.png" class="panel-icon"> Python</div>
          <div class="panel-group-title">Aksi</div>
          <div class="panel-item" onclick="addTag('code-page', 'Fix this bug: ', 'Fix Bug')"><img src="https://cdn-icons-png.flaticon.com/512/4997/4997543.png" class="panel-icon"> Fix Bug</div>
      </div>
      <div class="input-group">
          <button class="panel-btn" onclick="togglePanel('panel-code')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828919.png"></button>
          <textarea class="custom-input" placeholder="Ask about code or paste error..."></textarea>
          <button class="send-btn" style="background:#2563eb;">Run</button>
      </div>
  </div>
   <div class="wm-footer">POWERED BY TOPIK SAFALAS</div>
</div>

<div id="writer-page" class="ai-fullscreen">
  <div class="ai-top-bar"><button class="ai-back-btn" onclick="closeAI()">← Back</button><h3 data-lang-key="tool_writer">Pro Writer</h3><div style="width:50px;"></div></div>
  <div class="ai-main-area"><div class="output-box" style="font-family: serif; line-height:1.8;"></div></div>
  <div class="ai-input-wrapper">
      <div id="preview-writer-page" class="file-preview-area"></div>
      <div id="panel-writer" class="panel-menu">
          <div class="panel-item" onclick="addTag('writer-page', 'Buat outline artikel lengkap: ', 'Outline Saja')"><img src="https://cdn-icons-png.flaticon.com/512/2991/2991108.png" class="panel-icon"> Outline</div>
          <div class="panel-item" onclick="addTag('writer-page', 'Tulis artikel panjang 2000 kata: ', 'Long Article')"><img src="https://cdn-icons-png.flaticon.com/512/3596/3596091.png" class="panel-icon"> Long Article</div>
      </div>
      <div class="input-group">
          <button class="panel-btn" onclick="togglePanel('panel-writer')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828919.png"></button>
          <textarea class="custom-input" placeholder="Topic or Title..."></textarea>
          <button class="send-btn">Write</button>
      </div>
  </div>
   <div class="wm-footer">POWERED BY TOPIK SAFALAS</div>
</div>

<div id="math-page" class="ai-fullscreen">
  <div class="ai-top-bar"><button class="ai-back-btn" onclick="closeAI()">← Back</button><h3 data-lang-key="tool_math">Math Solver</h3><div style="width:50px;"></div></div>
  <div class="ai-main-area"><div class="output-box"></div></div>
  <div class="ai-input-wrapper">
      <div id="preview-math-page" class="file-preview-area"></div>
      <div id="panel-math" class="panel-menu">
          <div class="panel-item" onclick="triggerFileUpload('math-page', 'image')"><img src="https://cdn-icons-png.flaticon.com/512/3342/3342137.png" class="panel-icon"> Scan Soal</div>
          <div class="panel-item" onclick="addTag('math-page', 'Jelaskan rumus Fisika: ', 'Rumus Fisika')"><img src="https://cdn-icons-png.flaticon.com/512/3052/3052174.png" class="panel-icon"> Fisika</div>
      </div>
      <div class="input-group">
          <button class="panel-btn" onclick="togglePanel('panel-math')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828919.png"></button>
          <textarea class="custom-input" placeholder="Math problem..."></textarea>
          <button class="send-btn">=</button>
      </div>
  </div>
   <div class="wm-footer">POWERED BY TOPIK SAFALAS</div>
</div>

<div id="logo-page" class="ai-fullscreen">
  <div class="ai-top-bar"><button class="ai-back-btn" onclick="closeAI()">← Back</button><h3 data-lang-key="tool_logo">Logo Studio</h3><div style="width:50px;"></div></div>
  <div class="ai-main-area"><div class="output-box"></div></div>
  <div class="ai-input-wrapper">
      <div id="panel-logo" class="panel-menu">
         <div class="panel-item" onclick="addTag('logo-page', 'minimalist vector logo, flat design', 'Minimal')"><img src="https://cdn-icons-png.flaticon.com/512/875/875661.png" class="panel-icon"> Minimal</div>
         <div class="panel-item" onclick="addTag('logo-page', 'luxury gold elegant logo, serif font', 'Luxury')"><img src="https://cdn-icons-png.flaticon.com/512/1255/1255956.png" class="panel-icon"> Luxury</div>
      </div>
      <div id="preview-logo-page" class="file-preview-area"></div>
      <div class="input-group">
          <button class="panel-btn" onclick="togglePanel('panel-logo')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828919.png"></button>
          <textarea class="custom-input" placeholder="Brand Name & Style..."></textarea>
          <button class="send-btn">Gen</button>
      </div>
  </div>
   <div class="wm-footer">POWERED BY TOPIK SAFALAS</div>
</div>

<div id="social-page" class="ai-fullscreen">
  <div class="ai-top-bar"><button class="ai-back-btn" onclick="closeAI()">← Back</button><h3 data-lang-key="tool_social">Sosmed Manager</h3><div style="width:50px;"></div></div>
  <div class="ai-main-area"><div class="output-box"></div></div>
  <div class="ai-input-wrapper">
      <div id="preview-social-page" class="file-preview-area"></div>
      <div id="panel-social" class="panel-menu">
         <div class="panel-item" onclick="addTag('social-page', '(Format: Instagram Caption) ', 'Instagram')"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" class="panel-icon"> Instagram</div>
         <div class="panel-item" onclick="addTag('social-page', '(Format: TikTok Viral Script) ', 'TikTok')"><img src="https://cdn-icons-png.flaticon.com/512/3046/3046121.png" class="panel-icon"> TikTok</div>
      </div>
      <div class="input-group">
          <button class="panel-btn" onclick="togglePanel('panel-social')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828919.png"></button>
          <textarea class="custom-input" placeholder="Topic..."></textarea>
          <button class="send-btn">Gen</button>
      </div>
  </div>
   <div class="wm-footer">POWERED BY TOPIK SAFALAS</div>
</div>

<div id="prompt-page" class="ai-fullscreen">
  <div class="ai-top-bar"><button class="ai-back-btn" onclick="closeAI()">← Back</button><h3 data-lang-key="tool_prompt">Super Prompt</h3><div style="width:50px;"></div></div>
  <div class="ai-main-area"><div class="output-box"></div></div>
  <div class="ai-input-wrapper">
      <div id="preview-prompt-page" class="file-preview-area"></div>
      <div id="panel-prompt" class="panel-menu">
        <div class="panel-item" onclick="addTag('prompt-page', 'Optimalkan untuk Midjourney v6: ', 'Midjourney')"><img src="https://cdn-icons-png.flaticon.com/512/1042/1042390.png" class="panel-icon"> Midjourney</div>
      </div>
      <div class="input-group">
          <button class="panel-btn" onclick="togglePanel('panel-prompt')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828919.png"></button>
          <textarea class="custom-input" placeholder="Simple idea..."></textarea>
          <button class="send-btn">Gen</button>
      </div>
  </div>
   <div class="wm-footer">POWERED BY TOPIK SAFALAS</div>
</div>

<div id="dream-page" class="ai-fullscreen">
  <div class="ai-top-bar"><button class="ai-back-btn" onclick="closeAI()">← Back</button><h3 data-lang-key="tool_dream">Dream Interpreter</h3><div style="width:50px;"></div></div>
  <div class="ai-main-area"><div class="output-box"></div></div>
  <div class="ai-input-wrapper">
      <div id="preview-dream-page" class="file-preview-area"></div>
      <div id="panel-dream" class="panel-menu">
        <div class="panel-item" onclick="addTag('dream-page', 'Tafsirkan menurut Psikologi: ', 'Psikologi')"><img src="https://cdn-icons-png.flaticon.com/512/2051/2051917.png" class="panel-icon"> Psikologi</div>
      </div>
      <div class="input-group">
          <button class="panel-btn" onclick="togglePanel('panel-dream')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828919.png"></button>
          <textarea class="custom-input" placeholder="Your dream..."></textarea>
          <button class="send-btn">Gen</button>
      </div>
  </div>
   <div class="wm-footer">POWERED BY TOPIK SAFALAS</div>
</div>

<div id="email-page" class="ai-fullscreen">
  <div class="ai-top-bar"><button class="ai-back-btn" onclick="closeAI()">← Back</button><h3 data-lang-key="tool_email">Email Pro</h3><div style="width:50px;"></div></div>
  <div class="ai-main-area"><div class="output-box"></div></div>
  <div class="ai-input-wrapper">
      <div id="preview-email-page" class="file-preview-area"></div>
      <div id="panel-email" class="panel-menu">
          <div class="panel-item" onclick="addTag('email-page', 'Buat surat lamaran kerja: ', 'Lamar Kerja')"><img src="https://cdn-icons-png.flaticon.com/512/942/942748.png" class="panel-icon"> Job</div>
      </div>
      <div class="input-group">
          <button class="panel-btn" onclick="togglePanel('panel-email')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828919.png"></button>
          <textarea class="custom-input" placeholder="Email purpose..."></textarea>
          <button class="send-btn">Gen</button>
      </div>
  </div>
   <div class="wm-footer">POWERED BY TOPIK SAFALAS</div>
</div>

<div id="story-page" class="ai-fullscreen">
  <div class="ai-top-bar"><button class="ai-back-btn" onclick="closeAI()">← Back</button><h3 data-lang-key="tool_story">Story Creator</h3><div style="width:50px;"></div></div>
  <div class="ai-main-area"><div class="output-box"></div></div>
  <div class="ai-input-wrapper">
      <div id="preview-story-page" class="file-preview-area"></div>
      <div id="panel-story" class="panel-menu">
          <div class="panel-item" onclick="addTag('story-page', 'Genre: Horror. ', 'Horror')"><img src="https://cdn-icons-png.flaticon.com/512/3063/3063229.png" class="panel-icon"> Horror</div>
      </div>
      <div class="input-group">
          <button class="panel-btn" onclick="togglePanel('panel-story')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828919.png"></button>
          <textarea class="custom-input" placeholder="Story idea..."></textarea>
          <button class="send-btn">Gen</button>
      </div>
  </div>
   <div class="wm-footer">POWERED BY TOPIK SAFALAS</div>
</div>

<div id="idea-page" class="ai-fullscreen">
  <div class="ai-top-bar"><button class="ai-back-btn" onclick="closeAI()">← Back</button><h3 data-lang-key="tool_idea">Business Idea</h3><div style="width:50px;"></div></div>
  <div class="ai-main-area"><div class="output-box"></div></div>
  <div class="ai-input-wrapper">
      <div id="preview-idea-page" class="file-preview-area"></div>
      <div id="panel-idea" class="panel-menu">
          <div class="panel-item" onclick="addTag('idea-page', 'Modal Kecil (di bawah 1 juta). ', 'Modal Kecil')"><img src="https://cdn-icons-png.flaticon.com/512/2454/2454282.png" class="panel-icon"> Small Budget</div>
      </div>
      <div class="input-group">
          <button class="panel-btn" onclick="togglePanel('panel-idea')"><img src="https://cdn-icons-png.flaticon.com/512/1828/1828919.png"></button>
          <textarea class="custom-input" placeholder="Interest..."></textarea>
          <button class="send-btn">Gen</button>
      </div>
  </div>
   <div class="wm-footer">POWERED BY TOPIK SAFALAS</div>
</div>


<div id="settingsModal">
  <div class="modal-content">
    <h2 style="color:var(--text-main); margin-bottom:25px;" data-lang-key="nav_settings">Settings</h2>
    
    <label data-lang-key="lbl_language">Language / Bahasa</label>
    <select id="langSelect" onchange="updateLanguage()">
        <option value="id">Bahasa Indonesia (Default)</option>
        <option value="en">English (US)</option>
        <option value="jw">Basa Jawa (Krama)</option>
        <option value="jp">日本語 (Japanese)</option>
        <option value="ar">العربية (Arabic)</option>
    </select>

    <label data-lang-key="lbl_theme">Visual Theme</label>
    <select id="themeSelect" onchange="updateTheme()">
        <option value="default">Obsidian Onyx (Dark Luxury)</option>
        <option value="gold">Royal Gold (Premium)</option>
        <option value="white">Quantum White (Modern Clean)</option>
    </select>
    
    <button onclick="document.getElementById('settingsModal').classList.remove('active')" style="width:100%; padding:16px; background:var(--primary); border:none; border-radius:16px; color:#fff; font-weight:bold; cursor:pointer; margin-top:25px; box-shadow:0 10px 30px var(--primary-glow);">Save Changes</button>
  </div>
</div>

<script>
/* === TS LABS ULTIMATE V1.0 ENGINE === */
// KONFIGURASI API (Biarkan kosong untuk mode Auto-Free)
const GEMINI_API_KEY = ""; 

// --- DICTIONARY BAHASA (Translation Engine) ---
const translations = {
    id: {
        nav_home: "Beranda", nav_ai: "AI Tools", nav_creator: "Creator", nav_settings: "Pengaturan", nav_features: "Fitur",
        btn_start: "Mulai Sekarang", 
        hero_title: "Masa Depan AI<br><span>Tanpa Batas</span>",
        hero_desc: "Platform kecerdasan buatan kelas atas. Menggabungkan kecepatan, akurasi, dan desain premium untuk produktivitas maksimal.",
        section_tools: "Pilihan Alat AI", section_creator: "Profil Creator", section_features: "Fitur Eksklusif",
        tool_chat: "Chat Genius", desc_chat: "Asisten Cerdas Serba Bisa.",
        tool_image: "Visual Art", desc_image: "Buat Gambar Ultra HD.",
        tool_code: "Code Master", desc_code: "Ahli Koding & Debug.",
        tool_writer: "Pro Writer", desc_writer: "Penulis Artikel Profesional.",
        tool_math: "Math Solver", desc_math: "Solusi Matematika & Sains.",
        tool_logo: "Logo Studio", desc_logo: "Desain Brand Mewah.",
        tool_social: "Sosmed Manager", desc_social: "Caption Viral & Hashtag.",
        tool_prompt: "Super Prompt", desc_prompt: "Perbagus Prompt Gambar.",
        tool_dream: "Dream Interpreter", desc_dream: "Tafsir Arti Mimpi.",
        tool_email: "Email Pro", desc_email: "Buat Email Formal.",
        tool_story: "Story Creator", desc_story: "Buat Cerita Pendek.",
        tool_idea: "Business Idea", desc_idea: "Ide Bisnis Startup.",
        lbl_language: "Bahasa Sistem", lbl_theme: "Tema Tampilan",
        ui_ready: "Sistem Siap. Tanyakan apa saja.", ui_image_wait: "Preview gambar akan muncul di sini.",
        sys_prompt: "Anda adalah TS AI V1.0 (Edisi 2025), asisten AI tercanggih & futuristik dari TS Labs. Anda memiliki pengetahuan yang luas dan selalu update secara otomatis. Jawablah dengan SANGAT PROFESIONAL, AKURAT, dan LENGKAP. Gunakan format Markdown yang rapi (bold untuk poin penting). WAJIB MENJAWAB DALAM BAHASA INDONESIA."
    },
    en: {
        nav_home: "Home", nav_ai: "AI Tools", nav_creator: "Creator", nav_settings: "Settings", nav_features: "Features",
        btn_start: "Start Creating", 
        hero_title: "Experience Future<br><span>Limitless</span>",
        hero_desc: "High-end artificial intelligence platform. Combining speed, accuracy, and premium design for maximum productivity.",
        section_tools: "Premium <span>AI Suite</span>", section_creator: "Meet <span>Creator</span>", section_features: "Exclusive <span>Features</span>",
        tool_chat: "Chat Genius", desc_chat: "Smart All-in-One Assistant.",
        tool_image: "Visual Art", desc_image: "Generate Ultra HD Images.",
        tool_code: "Code Master", desc_code: "Programming & Debugging.",
        tool_writer: "Pro Writer", desc_writer: "Professional Article Writer.",
        tool_math: "Math Solver", desc_math: "Math & Science Solutions.",
        tool_logo: "Logo Studio", desc_logo: "Luxury Brand Design.",
        tool_social: "Social Manager", desc_social: "Viral Captions & Hashtags.",
        tool_prompt: "Super Prompt", desc_prompt: "Refine Image Prompts.",
        tool_dream: "Dream Interpreter", desc_dream: "Meaning of Dreams.",
        tool_email: "Email Pro", desc_email: "Formal Email Writing.",
        tool_story: "Story Creator", desc_story: "Short Story Generator.",
        tool_idea: "Business Idea", desc_idea: "Startup Business Ideas.",
        lbl_language: "System Language", lbl_theme: "Visual Theme",
        ui_ready: "System Ready. Ask anything.", ui_image_wait: "Image preview will appear here.",
        sys_prompt: "You are TS AI V1.0 (2025 Edition), the most advanced & futuristic AI assistant by TS Labs. You are fully updated with current knowledge. Answer accurately, professionally, and use clean Markdown formatting. YOU MUST ANSWER IN ENGLISH."
    },
    jw: {
        nav_home: "Omah", nav_ai: "Piranti AI", nav_creator: "Pencipta", nav_settings: "Setelan", nav_features: "Fitur",
        btn_start: "Miwiti Saiki", 
        hero_title: "Masa Depan AI<br><span>Tanpa Wates</span>",
        hero_desc: "Platform kapinteran buatan (AI) kanthi kualitas paling dhuwur. Cepet, akurat, lan desain mewah.",
        section_tools: "Pilihan <span>Piranti AI</span>", section_creator: "Profil <span>Pencipta</span>", section_features: "Fitur <span>Mligi</span>",
        tool_chat: "Chat Pinter", desc_chat: "Asisten Kanggo Kabeh.",
        tool_image: "Seni Visual", desc_image: "Gawe Gambar Apik.",
        tool_code: "Ahli Kode", desc_code: "Jago Koding & Program.",
        tool_writer: "Juru Tulis", desc_writer: "Nulis Artikel Apik.",
        tool_math: "Itung-itungan", desc_math: "Solusi Matematika.",
        tool_logo: "Gawe Logo", desc_logo: "Desain Brand Mewah.",
        tool_social: "Manajer Sosmed", desc_social: "Caption Viral & Hashtag.",
        tool_prompt: "Super Prompt", desc_prompt: "Dandani Prompt Gambar.",
        tool_dream: "Tafsir Mimpi", desc_dream: "Makna Impen.",
        tool_email: "Email Pro", desc_email: "Nulis Email Resmi.",
        tool_story: "Gawe Cerito", desc_story: "Gawe Cerito Cekak.",
        tool_idea: "Ide Bisnis", desc_idea: "Ide Usaha Anyar.",
        lbl_language: "Basa Sistem", lbl_theme: "Tema Tampilan",
        ui_ready: "Sistem Siap. Nyuwun pirsa napa mawon.", ui_image_wait: "Gambar bakal metu neng kene.",
        sys_prompt: "Sampeyan TS AI V1.0 (Edisi 2025). Jawab kanthi sopan, bener, lan nggunakake Basa Jawa (Krama Inggil utawa Ngoko sing sopan). Gunakake format Markdown."
    },
    jp: {
        nav_home: "ホーム", nav_ai: "AIツール", nav_creator: "クリエイター", nav_settings: "設定", nav_features: "特徴",
        btn_start: "始める", 
        hero_title: "未来を体験<br><span>無限の可能性</span>",
        hero_desc: "最高級の人工知能プラットフォーム。スピード、精度、プレミアムデザインを融合。",
        section_tools: "プレミアム <span>AIスイート</span>", section_creator: "クリエイター <span>紹介</span>", section_features: "独占 <span>機能</span>",
        tool_chat: "チャットAI", desc_chat: "スマートアシスタント。",
        tool_image: "画像生成", desc_image: "超高画質アート。",
        tool_code: "コードマスター", desc_code: "プログラミング支援。",
        tool_writer: "プロライター", desc_writer: "記事・エッセイ執筆。",
        tool_math: "数学ソルバー", desc_math: "数学と科学の解決。",
        tool_logo: "ロゴスタジオ", desc_logo: "ブランドデザイン。",
        tool_social: "ソーシャル管理", desc_social: "バイラルキャプション。",
        tool_prompt: "スーパープロンプト", desc_prompt: "画像プロンプトの改善。",
        tool_dream: "夢占い", desc_dream: "夢の意味。",
        tool_email: "プロメール", desc_email: "正式なメール作成。",
        tool_story: "ストーリー作成", desc_story: "短編小説ジェネレーター。",
        tool_idea: "ビジネスアイデア", desc_idea: "スタートアップのアイデア。",
        lbl_language: "言語", lbl_theme: "テーマ",
        ui_ready: "準備完了。何でも聞いてください。", ui_image_wait: "プレビューがここに表示されます。",
        sys_prompt: "あなたはTS AI V1.0（2025年版）です。正確かつ丁寧に、Markdown形式を使用して日本語で答えてください。"
    },
    ar: {
        nav_home: "الرئيسية", nav_ai: "أدوات الذكاء", nav_creator: "المطور", nav_settings: "الإعدادات", nav_features: "المميزات",
        btn_start: "ابدأ الآن", 
        hero_title: "مستقبل الذكاء<br><span>بلا حدود</span>",
        hero_desc: "منصة ذكاء اصطناعي راقية. تجمع بين السرعة والدقة والتصميم المتميز لإنتاجية قصوى.",
        section_tools: "أدوات <span>مميزة</span>", section_creator: "ملف <span>المطور</span>", section_features: "مميزات <span>حصرية</span>",
        tool_chat: "الدردشة الذكية", desc_chat: "مساعد ذكي شامل.",
        tool_image: "فنون بصرية", desc_image: "توليد صور عالية الدقة.",
        tool_code: "خبير البرمجة", desc_code: "البرمجة وتصحيح الأخطاء.",
        tool_writer: "الكاتب المحترف", desc_writer: "كتابة المقالات باحتراف.",
        tool_math: "حل المسائل", desc_math: "حلول الرياضيات والفيزياء.",
        tool_logo: "صانع الشعار", desc_logo: "تصميم علامات تجارية.",
        tool_social: "مدير التواصل", desc_social: "تسميات توضيحية فيرال.",
        tool_prompt: "موجه فائق", desc_prompt: "تحسين موجهات الصور.",
        tool_dream: "مفسر الأحلام", desc_dream: "معاني الأحلام.",
        tool_email: "بريد احترافي", desc_email: "كتابة بريد رسمي.",
        tool_story: "صانع القصص", desc_story: "مولد قصص قصيرة.",
        tool_idea: "أفكار تجارية", desc_idea: "أفكار شركات ناشئة.",
        lbl_language: "لغة النظام", lbl_theme: "المظهر",
        ui_ready: "النظام جاهز. اسأل أي شيء.", ui_image_wait: "ستظهر معاينة الصورة هنا.",
        sys_prompt: "أنت TS AI V1.0 (إصدار 2025). أجب بدقة وأدب باستخدام تنسيق Markdown. يجب أن تكون الإجابة باللغة العربية الفصحى."
    }
};

let currentLang = 'id';
let activeTags = {};
let currentFileContext = null; 
let currentActivePage = '';

// --- INITIALIZATION ---
window.onload = () => {
    updateTheme();
    updateLanguage();
};

function showSection(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('nav a').forEach(a => a.classList.remove('active-link'));
  // Simple active link logic
  if(id === 'home') document.querySelector('nav a[onclick*="home"]').classList.add('active-link');
  if(id === 'ai') document.querySelector('nav a[onclick*="ai"]').classList.add('active-link');
  window.scrollTo(0,0);
}

function openAI(pageId) {
  document.body.style.overflow = 'hidden';
  document.getElementById(pageId).classList.add('active');
}

function closeAI() {
  document.body.style.overflow = 'auto';
  document.querySelectorAll('.ai-fullscreen').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.panel-menu').forEach(m => m.classList.remove('show'));
  activeTags = {};
  currentFileContext = null;
  document.querySelectorAll('.file-preview-area').forEach(el => { el.innerHTML = ''; el.classList.remove('active'); });
}

// --- SETTINGS LOGIC ---
document.getElementById('btnSettings').onclick = () => { document.getElementById('settingsModal').classList.add('active'); }

function updateTheme() {
    const theme = document.getElementById('themeSelect').value;
    document.body.setAttribute('data-theme', theme);
    // Force redraw for clean transition
    const navImg = document.querySelector('nav img');
    if(theme === 'white') navImg.style.filter = "invert(1)";
    else navImg.style.filter = "none";
}

function updateLanguage() {
    currentLang = document.getElementById('langSelect').value;
    const data = translations[currentLang] || translations['id'];
    
    // Update Static Elements
    document.querySelectorAll('[data-lang-key]').forEach(el => {
        const key = el.getAttribute('data-lang-key');
        if(data[key]) {
            if(key === 'hero_title') el.innerHTML = data[key];
            else el.innerText = data[key];
        }
    });
}

function togglePanel(panelId) {
    const panel = document.getElementById(panelId);
    document.querySelectorAll('.panel-menu').forEach(m => { if(m.id !== panelId) m.classList.remove('show'); });
    panel.classList.toggle('show');
}

function addTag(pageId, value, label) {
    if(!activeTags[pageId]) activeTags[pageId] = [];
    if(!activeTags[pageId].find(t => t.label === label)) {
        activeTags[pageId].push({ value: value, label: label });
        renderPreview(pageId);
    }
    const page = document.getElementById(pageId);
    if(page) page.querySelector('.panel-menu').classList.remove('show');
}

function removeTag(pageId, index) {
    if(activeTags[pageId]) {
        activeTags[pageId].splice(index, 1);
        renderPreview(pageId);
    }
}

// --- FILE HANDLING ---
function triggerFileUpload(pageId, type) {
    currentActivePage = pageId;
    
    // LOGIC BARU: Tutup panel otomatis saat tombol upload diklik
    const page = document.getElementById(pageId);
    if(page) {
         const panel = page.querySelector('.panel-menu');
         if(panel) panel.classList.remove('show');
    }
    
    const fileInput = document.getElementById('realFileInput');
    if (pageId === 'image-page' || pageId === 'logo-page' || type === 'image') {
        fileInput.accept = "image/*";
    } else {
        fileInput.accept = "*/*";
    }
    fileInput.click();
}

function handleRealFileUpload(input) {
    if (input.files && input.files[0]) {
        const file = input.files[0];
        const reader = new FileReader();
        
        if (file.type.startsWith('image/')) {
            reader.readAsDataURL(file);
            reader.onload = function(e) {
                const base64Raw = e.target.result.split(',')[1]; 
                currentFileContext = {
                    name: file.name, type: 'IMAGE', mime: file.type, data: base64Raw, preview: e.target.result 
                };
                renderPreview(currentActivePage);
            };
        } else {
            reader.readAsText(file);
            reader.onload = function(e) {
                currentFileContext = {
                    name: file.name, type: 'TEXT', mime: 'text/plain', data: e.target.result, 
                    preview: 'https://cdn-icons-png.flaticon.com/512/2991/2991106.png'
                };
                renderPreview(currentActivePage);
            };
        }
        input.value = ''; 
    }
}

function renderPreview(pageId) {
    const container = document.getElementById(pageId === 'chat-page' ? 'preview-chat-page' : 'preview-' + pageId);
    const inputGroup = document.getElementById(pageId).querySelector('.input-group');
    if(!container) return;

    container.innerHTML = '';
    let hasContent = false;

    if(currentFileContext) {
        hasContent = true;
        container.innerHTML += `
          <div style="display:flex; align-items:center; gap:8px; background:rgba(255,255,255,0.1); padding:4px 8px; border-radius:8px;">
              <img src="${currentFileContext.preview}" class="preview-thumb">
              <div class="preview-info"><span class="preview-name">${currentFileContext.name}</span></div>
              <div class="preview-close" onclick="currentFileContext=null;renderPreview('${pageId}')" style="cursor:pointer;margin-left:5px;">×</div>
          </div>
        `;
    }

    if(activeTags[pageId] && activeTags[pageId].length > 0) {
        hasContent = true;
        activeTags[pageId].forEach((tag, index) => {
            const chip = document.createElement('div');
            chip.style.cssText = "display:inline-flex; align-items:center; gap:5px; background:var(--primary-glow); border:1px solid var(--primary); padding:4px 10px; border-radius:20px; font-size:11px; color:#fff;";
            chip.innerHTML = `<span>${tag.label}</span><span onclick="removeTag('${pageId}', ${index})" style="cursor:pointer;font-weight:bold;">×</span>`;
            container.appendChild(chip);
        });
    }

    if(hasContent) { container.classList.add('active'); if(inputGroup) inputGroup.classList.add('has-preview'); } 
    else { container.classList.remove('active'); if(inputGroup) inputGroup.classList.remove('has-preview'); }
}

// --- TYPEWRITER EFFECT FUNCTION (REVISED V1.0 - SYNC SCROLL) ---
async function typeEffect(element, htmlContent) {
    element.innerHTML = "";
    // Pecah berdasarkan spasi untuk simulasi streaming (per kata agar tag HTML aman)
    const chunks = htmlContent.split(' '); 
    let buffer = "";
    
    // Cari parent container untuk scrolling
    const scrollContainer = element.closest('.ai-main-area');

    for (let i = 0; i < chunks.length; i++) {
        buffer += chunks[i] + " ";
        element.innerHTML = buffer;
        
        // --- LOGIKA SCROLL BARU (INSTANT SYNC) ---
        if(scrollContainer) {
            // Kita paksa scroll ke paling bawah setiap kali kata bertambah
            // Menggunakan behavior 'auto' agar instan dan tidak ada lag animasi
            scrollContainer.scrollTop = scrollContainer.scrollHeight;
        }
        
        // Delay cepat (10ms) agar terasa mengetik tapi cepat
        await new Promise(r => setTimeout(r, 10));
    }
}


// --- CORE AI LOGIC (V1.0 UPGRADED) ---
document.querySelectorAll('.ai-fullscreen').forEach(page => {
    const btn = page.querySelector('.send-btn');
    const txt = page.querySelector('textarea.custom-input');
    if (btn) {
        btn.onclick = () => {
            if (txt && (txt.value.trim() !== '' || currentFileContext)) {
                handleAISend(page.id, txt.value, page.querySelector('.output-box'), currentFileContext);
                txt.value = '';
                currentFileContext = null;
                activeTags[page.id] = []; 
                renderPreview(page.id);
            }
        };
    }
    if (txt) {
        txt.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); btn.click(); }
        });
    }
});

async function handleAISend(pageId, inputVal, container, fileContext) {
    
    // 1. UI Rendering User Message
    let displayMsg = inputVal.replace(/\n/g, '<br>');
    if(fileContext && fileContext.type === 'IMAGE') displayMsg = `<img src="${fileContext.preview}" style="width:150px; border-radius:10px; display:block; margin-bottom:10px;"> ${displayMsg}`;
    
    if(pageId === 'chat-page') {
        container.innerHTML += `<div class="msg-user"><div class="chat-bubble">${displayMsg}</div></div>`;
        container.innerHTML += `<div class="msg-ai" id="loading"><div class="typing-indicator"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div>`;
        // Scroll bottom awal
        setTimeout(() => container.parentElement.scrollTo({ top: container.parentElement.scrollHeight, behavior: 'smooth' }), 100);
    } else {
        container.innerHTML = `<div class="typing-indicator" style="width:100%; justify-content:center;">Generating High Quality Result...</div>`;
    }

    let tagContext = activeTags[pageId] ? activeTags[pageId].map(t => t.value).join(" ") : "";
    let fullPrompt = inputVal + " " + tagContext;

    try {
        // --- CHECK FILE UPLOAD IN FREE MODE ---
        if ((!GEMINI_API_KEY || GEMINI_API_KEY.length < 5) && fileContext && fileContext.type === 'IMAGE') {
             await new Promise(r => setTimeout(r, 800)); // Fake loading
             if(pageId === 'chat-page') document.getElementById('loading').remove();
             
             const errorMsg = `
                ⚠️ <strong>System Notification:</strong><br>
                Fitur Analisis Visual & Dokumen saat ini sedang dalam tahap <em>Maintenance</em> (Pemeliharaan Sistem).<br><br>
                Tim teknis kami sedang meningkatkan infrastruktur server untuk pengalaman yang lebih baik. Mohon gunakan input teks untuk sementara waktu. Terima kasih atas pengertian Anda.
             `;
             
             if(pageId === 'chat-page') container.innerHTML += `<div class="msg-ai"><div class="chat-bubble">${errorMsg}</div></div>`;
             else container.innerHTML = errorMsg;
             return;
        }

        // --- IMAGE & LOGO GEN ---
        if (pageId === 'image-page' || pageId === 'logo-page') {
            let width = 1080, height = 1080;
            if(fullPrompt.includes("16:9")) { width = 1280; height = 720; }
            if(fullPrompt.includes("9:16")) { width = 720; height = 1280; }
            if(pageId === 'logo-page') fullPrompt = `minimalist vector logo, clean background, high quality, ${fullPrompt}`;
            
            const imgUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(fullPrompt)}?width=${width}&height=${height}&nologo=true&seed=${Math.floor(Math.random()*99999)}`;
            
            const img = new Image();
            img.src = imgUrl;
            img.onload = () => {
                container.innerHTML = `
                    <div style="text-align:center; animation:fadeInUp 0.5s;">
                        <img src="${imgUrl}" class="generated-img">
                        <br><br>
                        <a href="${imgUrl}" target="_blank" download="ts-generated.jpg" style="display:inline-block; border:1px solid var(--primary); padding:12px 30px; border-radius:50px; color:#fff; background:var(--primary); text-decoration:none; font-weight:bold;">Download HD</a>
                    </div>`;
            }
            return;
        }

        // --- TEXT GEN (FORCE 2025 MODE & HARD FACT UPDATES) ---
        let aiOutput = "";
        
        // 1. Dapatkan Waktu Real-time User
        const now = new Date();
        const timeString = now.toLocaleString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' });
        
        // 2. Injeksi Waktu & FAKTA KERAS ke System Prompt (REVISI SOFT - ANTI BANNED)
        let systemInstr = (translations[currentLang] || translations['id']).sys_prompt;
        
        // KITA UBAH CARA INJEKSINYA AGAR TIDAK DIANGGAP JAILBREAK OLEH AZURE
        systemInstr += `
        \n[System Update]:
        - Current Context Date: ${timeString}.
        - Operational Year: 2025.
        - Knowledge Update: Indonesia President is Prabowo Subianto, VP is Gibran Rakabuming.
        - Role: Answer as a helpful AI from 2025. Provide detailed, complex, and professional answers in Markdown.
        `;

        if (!GEMINI_API_KEY || GEMINI_API_KEY.length < 5) {
            // MODE AUTO-FREE (Pollinations OpenAI)
            const response = await fetch(`https://text.pollinations.ai/${encodeURIComponent(systemInstr + " User Question: " + fullPrompt)}?model=openai`);
            aiOutput = await response.text();
        } else {
            // MODE PREMIUM (Gemini API)
            let parts = [{ text: systemInstr }, { text: "User Question: " + fullPrompt }];
            let response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
                method: 'POST', headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: parts }] })
            });
            let data = await response.json();
            aiOutput = data.candidates?.[0]?.content?.parts?.[0]?.text || "Error: No Response.";
        }

        const cleanHtml = marked.parse(aiOutput);

        if(pageId === 'chat-page') {
            document.getElementById('loading').remove();
            // Create container for response
            const msgDiv = document.createElement('div');
            msgDiv.className = 'msg-ai';
            const bubble = document.createElement('div');
            bubble.className = 'chat-bubble';
            msgDiv.appendChild(bubble);
            container.appendChild(msgDiv);
            
            // Activate Typing Effect (Updated V1.0)
            await typeEffect(bubble, cleanHtml);
        } else {
            // For other tools (writer/code), just render with animation
            container.innerHTML = `<div style="animation:fadeInUp 0.5s">${cleanHtml}</div>`;
        }

    } catch (e) {
        console.error(e);
        if(pageId === 'chat-page') document.getElementById('loading').innerHTML = `<span style="color:red">Connection Error.</span>`;
        else container.innerHTML = `<p style="color:red">Server Error.</p>`;
    }
}
</script>
</body>
</html>
